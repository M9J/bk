const o="mybookmarks-dyncache-v1",n=/^\/(src|dist)?\/?(bookmarks\/)?/,h="https://api.github.com/repos/m9j/bookmarks/contents/version.json?ref=gh-pages";self.addEventListener("fetch",e=>{const t=new URL(e.request.url);if(t.href===h){e.respondWith(fetch(e.request));return}n.test(t.pathname)&&e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request).then(async s=>caches.open(o).then(c=>(c.put(e.request,s.clone()),s)))).catch(r=>{console.error("Fetch failed:",e.request.url,r)}))});
